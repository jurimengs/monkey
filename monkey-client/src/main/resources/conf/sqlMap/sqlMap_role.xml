<?xml version="1.0" encoding="UTF-8" ?>
<sqlMap namespace="Role">
    <!-- 通过email查找用户 -->
    <sql id="findRolesByRoleIds" isRead="true">
        <![CDATA[
        SELECT id, pid, company_id, role_name, type, remark, create_date, create_uid, update_date, update_uid 
            FROM wec_role
            <#if roleIdList?? && roleIdList?size gt 0>
                where id in  (
                    <#list roleIdList as id>
                        '${id}'
                        <#if id_has_next>,</#if>
                    </#list>
                )
            </#if>
        ]]>
    </sql>
    
    <sql id="findRolesByCompanyId" isRead="true">
        <![CDATA[
            SELECT * FROM wec_role where (company_id = :companyId or company_id = 'ALL') and status = 0 and role_name <> 'SUPER' and role_name <> 'REGISTER_MANAGER'
        ]]>
    </sql>
    
    <sql id="updateEntity">
        <![CDATA[
            update wec_role set role_name= :roleName, type = :type 
            <#if pid?? && pid?length gt 0>
                , pid=:pid
            </#if>
            <#if status?? && status?length gt 0>
                , status=:status
            </#if>
            <#if remark?? && remark?length gt 0>
                , remark=:remark
            </#if>
            where id=:id and company_id = :companyId
        ]]>
    </sql>
    
    <sql id="findByUniqueKey" isRead="true">
        <![CDATA[
            SELECT * FROM wec_role where company_id = :companyId and type = :type and role_name = :roleName
        ]]>
    </sql>
    <sql id="findRoleEntityByRoleName" isRead="true">
        <![CDATA[
            SELECT * FROM wec_role where role_name = :roleName
            <#if companyId?? && companyId?length gt 0>
                and company_id = :companyId
            </#if>
        ]]>
    </sql>
</sqlMap>
